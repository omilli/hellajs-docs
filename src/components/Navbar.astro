---
import { Icon } from "astro-icon/components";
import Search from "astro-pagefind/components/Search";

const { pathname } = Astro.url;

const links = [
  { root: "/learn", label: "Learn" },
  {
    root: "/reference",
    label: "API Reference",
  },
  { root: "/plugins", label: "Plugins" },
];
---

<div class="navbar bg-base-300 fixed top-0 left-0 right-0 z-50">
  <div class="navbar-start w-auto">
    <!-- Logo -->
    <a href="/" class="btn btn-ghost text-xl">
      <img src="/favicon.svg" class="h-8" />
    </a>
  </div>

  <!-- Desktop navigation -->
  <div class="navbar-center hidden flex-1 lg:flex items-end">
    <div role="tablist" class="tabs tabs-boxed">
      {
        links.map((link) => (
          <a
            role="tab"
            href={link.root}
            class:list={{
              "px-2 mx-2 text-lg": true,
              "text-primary! font-bold": pathname.startsWith(link.root),
            }}
          >
            {link.label}
          </a>
        ))
      }
    </div>
  </div>

  <div class="navbar-end flex-1 lg:flex-none">
    <!-- Search - takes available space on mobile -->
    <div class="flex-1 mr-2 lg:w-md lg:flex-none lg:mr-4">
      <Search id="search" className="pagefind-ui" />
    </div>
    <!-- GitHub icon -->
    <a
      href="https://github.com/omilli/hellajs"
      class="btn btn-ghost btn-circle flex-shrink-0"
    >
      <Icon name="ph:github-logo" width={24} height={24} />
    </a>
    <!-- Sidebar toggle - only visible on mobile -->
    <label
      for="sidebar-drawer"
      class="btn btn-ghost btn-circle lg:hidden flex-shrink-0"
    >
      <!-- Hamburger icon (shown when sidebar is closed) -->
      <svg
        class="w-5 h-5 sidebar-hamburger"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M4 6h16M4 12h16M4 18h16"></path>
      </svg>
      <!-- Close icon (shown when sidebar is open) -->
      <svg
        class="w-5 h-5 sidebar-close hidden"
        fill="none"
        stroke="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"></path>
      </svg>
    </label>
  </div>
</div>
