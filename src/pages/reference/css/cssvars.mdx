---
title: cssVars
description: Define and inject CSS variables from JS objects.
layout: ../../../layouts/MainLayout.astro
---

# cssVars

Define and inject CSS variables from JS objects.

## API

```typescript
function cssVars(vars: Record<string, any>): Record<string, string>

// Creates CSS variables with immediate DOM injection
import { cssVars } from '@hellajs/css';

const vars = cssVars({
  colors: {
    background: '#ffffff',
    text: '#000000'
  }
});

// Access variables: vars.colors.background → 'var(--colors-background)'
```

**Parameters:**
- `vars`: A nested object of key-value pairs to be converted into CSS variables

**Returns:**
- An object with the same structure, where values are `var(--css-variable-name)` strings

**Functions:**
- `cssVarsReset()`: Resets the CSS variables system, removing the stylesheet

**Processing Architecture:**
```
Input Object → Flattening → Variable Generation → DOM Injection → Access Object
     ↓             ↓              ↓                ↓               ↓
{colors:{bg:'#fff'}} → 'colors-bg' → '--colors-bg:#fff' → :root → vars.colors.bg
```

**Key Features:**
- **Nested Flattening** - Nested objects converted to kebab-case CSS variables
- **Immediate DOM Injection** - Variables applied to :root synchronously  
- **Deterministic Output** - Same input always produces same variable names
- **Content-Based Generation** - Consistent variable names from object structure

## TypeScript

The function accepts nested objects and returns a flattened structure with `var()` references.

```typescript
const tokens = cssVars({
  colors: { 
    primary: 'blue',
    secondary: 'red' 
  },
  spacing: { small: '8px', large: '24px' }
});

// Type: Record<string, string>
// tokens.colors.primary → 'var(--colors-primary)'
// tokens.colors.secondary → 'var(--colors-secondary)'
// tokens.spacing.small → 'var(--spacing-small)'
```

**Flattening Rules:**
- Nested objects are flattened with kebab-case separators
- `{ colors: { primary: 'blue' } }` becomes `--colors-primary: blue`
- Arrays and primitive values are used as-is

## Basic Usage

### Static Variables

Define design tokens as JavaScript objects. `cssVars` flattens nested keys and makes them available globally.

```jsx
import { css, cssVars } from '@hellajs/css';

// Define variables
const theme = cssVars({
  colors: {
    primary: '#3b82f6',
    text: '#333'
  },
  spacing: {
    sm: '8px',
    lg: '24px'
  }
});

// Use variables in styles
const buttonStyle = css({
  backgroundColor: theme.colors.primary,
  color: theme.colors.text,
  padding: theme.spacing.sm
});

<button class={buttonStyle}>Click Me</button>
```

### Dynamic Variables with Signals

Use signals with cssVars for reactive theming. Signal changes automatically update CSS variables.

```jsx
import { signal, computed } from '@hellajs/core';
import { css, cssVars } from '@hellajs/css';

const isDark = signal(false);
const accent = signal('#3b82f6');

// Reactive variables that update automatically
const themeVars = computed(() => cssVars({
  colors: {
    background: isDark() ? '#000' : '#fff',
    text: isDark() ? '#fff' : '#000',
    accent: accent()
  }
}));

// Use in styles
const cardStyle = css({
  backgroundColor: themeVars().colors.background,
  color: themeVars().colors.text,
  borderColor: themeVars().colors.accent
});

// Signal updates automatically trigger CSS variable updates
isDark(true);        // Changes background/text colors
accent('#ef4444');   // Changes accent color
```

This generates CSS variables in the DOM:
```css
:root {
  --colors-background: #000;
  --colors-text: #fff;
  --colors-accent: #ef4444;
}
```


## Key Concepts

### Object Flattening

Nested objects are flattened into kebab-case CSS custom properties with immediate DOM injection.

**Processing Pipeline:**
```
Nested Object → Flattening → CSS Variables → :root Injection
      ↓            ↓             ↓              ↓
{colors:{primary:'blue'}} → 'colors-primary' → '--colors-primary:blue' → DOM
```

```jsx
const vars = cssVars({
  colors: { primary: 'blue', secondary: 'red' },
  spacing: { sm: '8px', lg: '24px' }
});

// Generates CSS: :root { --colors-primary: blue; --colors-secondary: red; ... }
// Access via: vars.colors.primary → 'var(--colors-primary)'
```

### Global Scope

All CSS variables are injected into `:root`, making them available throughout the application.

```jsx
cssVars({ theme: { color: '#007bff' } });
// Creates: :root { --theme-color: #007bff; }
// Available anywhere in CSS as: var(--theme-color)
```

### Reactive Integration

Use signals with `cssVars` for automatic theme updates. Signal changes trigger CSS variable regeneration.

```jsx
const theme = signal('light');
const primary = signal('#3b82f6');

// Variables update automatically when signals change
const vars = computed(() => cssVars({
  colors: {
    background: theme() === 'light' ? '#fff' : '#000',
    primary: primary()
  }
}));

// Signal changes automatically update CSS variables
theme('dark');           // Triggers variable update
primary('#10b981');      // Triggers variable update
```
### Performance Considerations

Group variable updates into single `cssVars()` calls for optimal performance.

```jsx
// ❌ Multiple calls trigger separate DOM updates
cssVars({ colors: { primary: 'blue' } });      // DOM update
cssVars({ colors: { secondary: 'red' } });     // DOM update + overwrites

// ✅ Single call for all variables
cssVars({ 
  colors: { 
    primary: 'blue', 
    secondary: 'red' 
  } 
}); // Single DOM update
```


### Performance

The CSS variables system prioritizes **predictable performance** through object flattening and immediate DOM updates.

#### Basic Approach
CSS variable updates trigger immediate DOM changes - group updates into single cssVars() call for efficiency.

```jsx
// ❌ Multiple processing calls (inefficient)
cssVars({ colors: { primary: 'blue' } });      // Process + DOM update
cssVars({ colors: { secondary: 'red' } });     // Process + DOM update

// ✅ Single processing call (optimal)  
cssVars({ colors: { primary: 'blue', secondary: 'red' } });  // Process once + DOM update
```

#### Reactive Approach (Optimal)
Use signals directly with cssVars. Signal reactivity automatically updates CSS variables without additional processing.

```jsx
import { batch } from '@hellajs/core';

const primary = signal('#3b82f6');
const secondary = signal('#64748b'); 
const theme = signal('light');

// CSS variables set up once - signals provide reactivity
const vars = cssVars({
  colors: {
    primary: primary(),
    secondary: secondary(),
    background: theme() === 'light' ? '#fff' : '#000'
  }
});

// Signal changes automatically update the CSS variables
batch(() => {
  primary('#ef4444');
  secondary('#dc2626');
  theme('dark');  
}); // CSS variables update automatically

// Individual signal changes also work
primary('#10b981'); // CSS variable updates automatically
```

**Processing Characteristics:**
- **O(1) Object Flattening** - Consistent performance regardless of nesting depth
- **Synchronous DOM Updates** - Variables applied immediately without delay
- **Predictable Memory Usage** - Simple variable storage without accumulation  
- **Deterministic Output** - Same input always produces same CSS variables

